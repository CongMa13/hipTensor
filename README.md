# hipTENSOR
Building hipTENSOR:
## Docker script
```bash
docker run                                     \
-it                                            \
--privileged                                   \
--group-add sudo                               \
-w /root/workspace                             \
-v ${PATH_TO_LOCAL_WORKSPACE}:/root/workspace  \
rocm/tensorflow:rocm5.1-tf2.6-dev              \
/bin/bash
```

# Install the new rocm-cmake version
https://github.com/RadeonOpenCompute/rocm-cmake

## Build
```bash
mkdir build && cd build
```

```bash
# Need to specify target ID, example below is gfx908 and gfx90a
cmake                                                                 \
-D BUILD_DEV=OFF                                                      \
-D CMAKE_BUILD_TYPE=Release                                           \
-D CMAKE_CXX_FLAGS=" --offload-arch=gfx908 --offload-arch=gfx90a -O3" \
-D CMAKE_CXX_COMPILER=/opt/rocm/bin/hipcc                             \
-D CMAKE_PREFIX_PATH=/opt/rocm                                        \
-D CMAKE_INSTALL_PREFIX=${PATH_TO_CK_INSTALL_DIRECTORY}               \
..
```
#To run the hipTENSOR in debug mode for extensive debugging API results.
```bash
# Need to specify target ID, example below is gfx908 and gfx90a
cmake                                                                 \
-D BUILD_DEV=OFF                                                      \
-D CMAKE_BUILD_TYPE=Release                                           \
-D CMAKE_CXX_FLAGS=" --offload-arch=gfx908 --offload-arch=gfx90a -O3" \
-D CMAKE_CXX_COMPILER=/opt/rocm/bin/hipcc                             \
-D CMAKE_PREFIX_PATH=/opt/rocm                                        \
-D CMAKE_INSTALL_PREFIX=${PATH_TO_CK_INSTALL_DIRECTORY}               \
-D HT_DEBUG_MODE=ON                                                   \
..
```
### Build and run hipTENSOR
```bash
 make
```

### Install hipTENSOR package
```bash
 make install
```
TODO: 

Ongoing:
Improvising the documentation part and few changes in the header files to capture all APIS.
Optimising the main README.md in par with the other RocmSoftwarePlaftorm projects
Furtthermore, introducing changes for the more MD files and integrate with sphinx documentation for better redability.
Automating the pdf generation based on the latex generated by the shpinx-latex.

In future:
Adapt the hiptensorContractionFind API to different set of available algorithms on the different accelerators.
Adapt the hiptensorContractionGetWorkspace API as per the future backends.
Also, to adapt the library to handle for the FP64 tensors (Pending due to compiler issue: https://ontrack-internal.amd.com/browse/SWDEV-335738).
Need to make few modularisation in the ck part of the core logic handling all the datatypes.

Status:
Adpated all the hipTENSOR APIs to the cuTENSOR style and were able to verify the results.
Completed all the necessary changes required for the tensor contraction on the FP32 tensors.
Integrated the package documentation with the sphinx+doxygen+breathe for better redability.
